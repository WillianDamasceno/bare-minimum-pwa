<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />

    <title>Bare Minimmum PWA</title>

    <link rel="manifest" href="./manifest.webmanifest" />
    <meta name="theme-color" content="#000000" />

    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }
    </style>
  </head>

  <body>
    <button disabled>Install App</button>

    <script>
      const installButton = document.querySelector("button");
      let deferredPrompt = null;

      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;
        installButton.disabled = false;
      });

      installButton.addEventListener("click", async () => {
        if (!deferredPrompt) return;

        installButton.disabled = true;

        deferredPrompt.prompt();
        await deferredPrompt.userChoice;

        deferredPrompt = null;
      });

      window.addEventListener("appinstalled", () => {
        installButton.textContent = "Installed";
        installButton.disabled = true;
      });
    </script>
  </body>
</html>
